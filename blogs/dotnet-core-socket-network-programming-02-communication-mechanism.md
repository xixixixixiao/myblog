# .NET Core Socket 网络编程, 第一篇 - 网络应用程序通信机制

## Port (端口)

计算机之间相互通信, 看起来只需要知道 IP 地址就可以实现交流了. 实则不然, 真正负责通信功能的不是两台计算机, 而是运行在两台计算机上的 *进程*. 但是 IP 地址却只能标识到某一台计算机, 而不能标识计算机上的进程. 如果要标识进程, 则需要引入新的地址空间, 这就是 **端口**.

通常所说的 `端口` 一般有两种含义: 一是计算机的物理端口, 比如连接网线的网络端口, 连接手机的 USB 端口等; 二是逻辑端口, 即进程标识, 比如 HTTP 的 80 端口, FTP 的 21 端口等. 由于本系列教程是关于应用程序软件的开发, 其中所述的端口均指逻辑端口.

定义端口是为了解决多个应用程序进程同时通信的问题, 端口由两个字节的二进制数表示, 因此, 端口范围是从 0 到 65535. 由于 TCP/IP 传输层的 TCP 与 UDP 是相互独立的模块, 所以各自的端口号也各自相互独立.

端口号的分配规则如下:

- 端口 0. 不使用或作特殊它用.
- 端口 1 - 1023. 紧密绑定于一些服务. 通常这些端口的通讯明确表明了某种服务的协议, 网络应用程序开发应避免使用此范围端口.
- 端口 1024 - 49999. 用于客户端程序临时端口, 只需保证该端口号在本机惟一即可.
- 端口 50000 - 65535. 用于服务端程序端口.

在网络应用程序开发中, 客户端程序使用端口范围为 1024 - 49999, 服务端程序使用端口范围为 50000 - 65535.

## Socket (套接字)

Socket 作为基本的操作单元支持 TCP/IP 网络通信. Socket 可以看成是两个网络应用程序进行通信时, 各自通信连接中的一个 **端点**. 使用 Socket 便于区分不同应用程序的进程之间网络通信和连接. 对于两台通信的计算机而言, Socket 包含了 `发送方 IP`, `发送方端口号`, `接收方 IP`, `接收方端口号`, `协议` 五部分.

![Socket 组成](./images/dotnet-core-socket-networking-programming/02-communication-mechanism/socket-composition.png)

## 基于 Socket 的通信机制

网络中的两台计算机的进程之间的通信与单台计算机进程之间的通信不同, 前者是跨计算机交换数据. 在单台计算机的进程之间通信, 只需要知道系统为它们分配的进程 ID 即可. 但是在网络中, 进程间的通信一下子就变得复杂了起来. 首先, 要解决如何识别网络中的计算机; 其次, 不同计算机上运行的操作系统分配进程 ID 的策略也不同.
